# 章节保存和重新打开功能使用指南

## 功能概述

现在 co-novel 小说创作工具支持将生成的章节保存到服务器，并且可以随时重新打开已保存的章节继续编辑或查看。

## 功能特性

### 1. 章节保存功能
- ✅ 将生成的章节内容永久保存到服务器
- ✅ 自动保存小说的基本信息（标题、类型、主题、大纲）
- ✅ 支持自定义章节标题
- ✅ 自动统计字数和记录创建时间

### 2. 已保存章节查看功能
- ✅ 查看所有已保存的章节列表
- ✅ 按时间倒序显示，最新的在前
- ✅ 显示章节详细信息：标题、字数、创建时间、所属小说等
- ✅ 美观的卡片式界面设计

### 3. 重新打开章节功能
- ✅ 一键重新打开任何已保存的章节
- ✅ 自动恢复完整的创作状态和上下文
- ✅ 支持继续生成其他章节或进行编辑

## 使用方法

### 保存章节

1. **完成章节生成**: 在小说创作工作台完成一个章节的生成后，在"步骤5: 生成第一章"页面可以看到生成的章节内容。

2. **点击保存**: 点击页面右下角的绿色"保存章节"按钮。

3. **确认保存**: 系统会自动将章节内容、小说信息等保存到服务器，并显示保存成功的提示。

### 查看已保存章节

#### 方法一：从首页进入
- 在创作工作台首页（基础设置页面），点击"查看已保存章节"按钮

#### 方法二：从章节生成页面进入
- 在完成章节生成后，点击蓝色的"查看已保存章节"按钮

### 重新打开章节

1. **进入章节列表**: 通过上述方法打开已保存章节对话框

2. **选择章节**: 浏览章节列表，找到要重新打开的章节

3. **点击打开**: 点击章节卡片右下角的"打开章节"按钮

4. **自动恢复**: 系统会自动恢复该章节的完整创作状态，包括：
   - 小说类型和主题
   - 生成的标题和大纲
   - 章节内容和设置
   - 创作进度（直接到第5步）

## 界面说明

### 章节卡片信息
每个章节卡片包含以下信息：
- **章节标题**: 章节的具体标题
- **小说名称**: 该章节所属的小说标题
- **类型标签**: 小说的类型（玄幻、都市、科幻等）
- **字数统计**: 章节的字数
- **创建时间**: 章节保存的时间
- **主题描述**: 小说的主题说明

### 按钮功能
- **🗂️ 查看已保存章节**: 打开章节列表对话框
- **💾 保存章节**: 将当前章节保存到服务器
- **👁️ 打开章节**: 重新加载选定的章节
- **🔄 刷新列表**: 重新获取最新的章节列表

## 技术实现

### 后端 API
- `POST /api/ai/save-chapter`: 保存章节
- `GET /api/ai/saved-chapters`: 获取章节列表
- `GET /api/ai/chapter/{chapter_id}`: 获取特定章节内容

### 数据存储
- 使用 SQLite 数据库存储
- 支持小说项目和章节的关联管理
- 自动维护数据一致性和统计信息

### 前端功能
- 响应式设计，支持深色模式
- 流式加载和实时状态反馈
- 优雅的错误处理和用户提示

## 注意事项

1. **网络连接**: 保存和加载功能需要确保与后端服务器的网络连接正常

2. **数据安全**: 章节内容会永久保存在服务器上，请注意保护您的创作内容

3. **浏览器兼容性**: 建议使用现代浏览器以获得最佳体验

4. **存储空间**: 目前没有限制保存章节的数量，但建议合理使用存储空间

## 故障排除

### 保存失败
- 检查网络连接
- 确认后端服务正在运行
- 检查章节内容是否完整

### 加载失败
- 刷新页面重试
- 检查服务器状态
- 联系技术支持

### 界面显示问题
- 清除浏览器缓存
- 检查浏览器版本
- 尝试使用其他浏览器

## 更新日志

### v2.1.0 (2025-09-06)
- ✨ 新增章节保存功能
- ✨ 新增已保存章节查看功能
- ✨ 新增重新打开章节功能
- 🎨 优化界面设计和用户体验
- 🐛 修复相关bug和性能问题

---

如有任何问题或建议，请随时联系开发团队。